(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[147],{3094:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/crop",function(){return n(3241)}])},702:function(e,t,n){"use strict";n.d(t,{p:function(){return h}});var r=n(7568),i=n(655),o=Math.PI/180;function a(){return(a=(0,r.Z)(function(e,t,n){var r,a,s,h,l,c,d,u,p,g,w,f=arguments;return(0,i.__generator)(this,function(i){if(r=f.length>3&&void 0!==f[3]?f[3]:1,a=f.length>4&&void 0!==f[4]?f[4]:0,!(s=t.getContext("2d")))throw Error("No 2d context");return h=e.naturalWidth/e.width,l=e.naturalHeight/e.height,c=window.devicePixelRatio,t.width=Math.floor(n.width*h*c),t.height=Math.floor(n.height*l*c),s.scale(c,c),s.imageSmoothingQuality="high",d=n.x*h,u=n.y*l,p=a*o,g=e.naturalWidth/2,w=e.naturalHeight/2,s.save(),s.translate(-d,-u),s.translate(g,w),s.rotate(p),s.scale(r,r),s.translate(-g,-w),s.drawImage(e,0,0,e.naturalWidth,e.naturalHeight,0,0,e.naturalWidth,e.naturalHeight),s.restore(),[2]})})).apply(this,arguments)}var s="";function h(e,t){return l.apply(this,arguments)}function l(){return(l=(0,r.Z)(function(e,t){var n,r,o,s,h=arguments;return(0,i.__generator)(this,function(i){switch(i.label){case 0:var l;return n=h.length>2&&void 0!==h[2]?h[2]:1,r=h.length>3&&void 0!==h[3]?h[3]:0,!function(e,t,n){return a.apply(this,arguments)}(e,o=document.createElement("canvas"),t,n,r),[4,(l=o,new Promise(function(e){l.toBlob(e)}))];case 1:if(!(s=i.sent()))return console.error("Failed to create blob"),[2,""];return[2,URL.createObjectURL(s)]}})})).apply(this,arguments)}},3241:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var r=n(5893),i=n(6120),o=n.n(i),a=n(7294);n(1919);var s=n(702);n(1021);var h=n(7921),l=n(5793);/**
    * @license
    * Copyright 2021 Google LLC. All Rights Reserved.
    * Licensed under the Apache License, Version 2.0 (the "License");
    * you may not use this file except in compliance with the License.
    * You may obtain a copy of the License at
    *
    * http://www.apache.org/licenses/LICENSE-2.0
    *
    * Unless required by applicable law or agreed to in writing, software
    * distributed under the License is distributed on an "AS IS" BASIS,
    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    * See the License for the specific language governing permissions and
    * limitations under the License.
    * =============================================================================
    */ /**
    * @license
    * Copyright 2021 Google LLC. All Rights Reserved.
    * Licensed under the Apache License, Version 2.0 (the "License");
    * you may not use this file except in compliance with the License.
    * You may obtain a copy of the License at
    *
    * http://www.apache.org/licenses/LICENSE-2.0
    *
    * Unless required by applicable law or agreed to in writing, software
    * distributed under the License is distributed on an "AS IS" BASIS,
    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    * See the License for the specific language governing permissions and
    * limitations under the License.
    * =============================================================================
    */ /*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */ function c(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{h(r.next(e))}catch(t){o(t)}}function s(e){try{h(r.throw(e))}catch(t){o(t)}}function h(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}h((r=r.apply(e,t||[])).next())})}function d(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ var u={BASE_PATH:"https://tfhub.dev/tensorflow/tfjs-model/deeplab",CROP_SIZE:513,COLORMAPS:{ADE20K:[[0,0,0],[120,120,120],[180,120,120],[6,230,230],[80,50,50],[4,200,3],[120,120,80],[140,140,140],[204,5,255],[230,230,230],[4,250,7],[224,5,255],[235,255,7],[150,5,61],[120,120,70],[8,255,51],[255,6,82],[143,255,140],[204,255,4],[255,51,7],[204,70,3],[0,102,200],[61,230,250],[255,6,51],[11,102,255],[255,7,71],[255,9,224],[9,7,230],[220,220,220],[255,9,92],[112,9,255],[8,255,214],[7,255,224],[255,184,6],[10,255,71],[255,41,10],[7,255,255],[224,255,8],[102,8,255],[255,61,6],[255,194,7],[255,122,8],[0,255,20],[255,8,41],[255,5,153],[6,51,255],[235,12,255],[160,150,20],[0,163,255],[140,140,140],[250,10,15],[20,255,0],[31,255,0],[255,31,0],[255,224,0],[153,255,0],[0,0,255],[255,71,0],[0,235,255],[0,173,255],[31,0,255],[11,200,200],[255,82,0],[0,255,245],[0,61,255],[0,255,112],[0,255,133],[255,0,0],[255,163,0],[255,102,0],[194,255,0],[0,143,255],[51,255,0],[0,82,255],[0,255,41],[0,255,173],[10,0,255],[173,255,0],[0,255,153],[255,92,0],[255,0,255],[255,0,245],[255,0,102],[255,173,0],[255,0,20],[255,184,184],[0,31,255],[0,255,61],[0,71,255],[255,0,204],[0,255,194],[0,255,82],[0,10,255],[0,112,255],[51,0,255],[0,194,255],[0,122,255],[0,255,163],[255,153,0],[0,255,10],[255,112,0],[143,255,0],[82,0,255],[163,255,0],[255,235,0],[8,184,170],[133,0,255],[0,255,92],[184,0,255],[255,0,31],[0,184,255],[0,214,255],[255,0,112],[92,255,0],[0,224,255],[112,224,255],[70,184,160],[163,0,255],[153,0,255],[71,255,0],[255,0,163],[255,204,0],[255,0,143],[0,255,235],[133,255,0],[255,0,235],[245,0,255],[255,0,122],[255,245,0],[10,190,212],[214,255,0],[0,204,255],[20,0,255],[255,255,0],[0,153,255],[0,41,255],[0,255,204],[41,0,255],[41,255,0],[173,0,255],[0,245,255],[71,0,255],[122,0,255],[0,255,184],[0,92,255],[184,255,0],[0,133,255],[255,214,0],[25,194,194],[102,255,0],[92,0,255]],CITYSCAPES:[[128,64,128],[244,35,232],[70,70,70],[102,102,156],[190,153,153],[153,153,153],[250,170,30],[220,220,0],[107,142,35],[152,251,152],[70,130,180],[220,20,60],[255,0,0],[0,0,142],[0,0,70],[0,60,100],[0,80,100],[0,0,230],[119,11,32]],PASCAL:[[0,0,0],[128,0,0],[0,128,0],[128,128,0],[0,0,128],[128,0,128],[0,128,128],[128,128,128],[64,0,0],[192,0,0],[64,128,0],[192,128,0],[64,0,128],[192,0,128],[64,128,128],[192,128,128],[0,64,0],[128,64,0],[0,192,0],[128,192,0],[0,64,128],[128,64,128],[0,192,128],[128,192,128],[64,64,0],[192,64,0],[64,192,0],[192,192,0],[64,64,128],[192,64,128],[64,192,128],[192,192,128],[0,0,64],[128,0,64],[0,128,64],[128,128,64],[0,0,192],[128,0,192],[0,128,192],[128,128,192],[64,0,64],[192,0,64],[64,128,64],[192,128,64],[64,0,192],[192,0,192],[64,128,192],[192,128,192],[0,64,64],[128,64,64],[0,192,64],[128,192,64],[0,64,192],[128,64,192],[0,192,192],[128,192,192],[64,64,64],[192,64,64],[64,192,64],[192,192,64],[64,64,192],[192,64,192],[64,192,192],[192,192,192],[32,0,0],[160,0,0],[32,128,0],[160,128,0],[32,0,128],[160,0,128],[32,128,128],[160,128,128],[96,0,0],[224,0,0],[96,128,0],[224,128,0],[96,0,128],[224,0,128],[96,128,128],[224,128,128],[32,64,0],[160,64,0],[32,192,0],[160,192,0],[32,64,128],[160,64,128],[32,192,128],[160,192,128],[96,64,0],[224,64,0],[96,192,0],[224,192,0],[96,64,128],[224,64,128],[96,192,128],[224,192,128],[32,0,64],[160,0,64],[32,128,64],[160,128,64],[32,0,192],[160,0,192],[32,128,192],[160,128,192],[96,0,64],[224,0,64],[96,128,64],[224,128,64],[96,0,192],[224,0,192],[96,128,192],[224,128,192],[32,64,64],[160,64,64],[32,192,64],[160,192,64],[32,64,192],[160,64,192],[32,192,192],[160,192,192],[96,64,64],[224,64,64],[96,192,64],[224,192,64],[96,64,192],[224,64,192],[96,192,192],[224,192,192],[0,32,0],[128,32,0],[0,160,0],[128,160,0],[0,32,128],[128,32,128],[0,160,128],[128,160,128],[64,32,0],[192,32,0],[64,160,0],[192,160,0],[64,32,128],[192,32,128],[64,160,128],[192,160,128],[0,96,0],[128,96,0],[0,224,0],[128,224,0],[0,96,128],[128,96,128],[0,224,128],[128,224,128],[64,96,0],[192,96,0],[64,224,0],[192,224,0],[64,96,128],[192,96,128],[64,224,128],[192,224,128],[0,32,64],[128,32,64],[0,160,64],[128,160,64],[0,32,192],[128,32,192],[0,160,192],[128,160,192],[64,32,64],[192,32,64],[64,160,64],[192,160,64],[64,32,192],[192,32,192],[64,160,192],[192,160,192],[0,96,64],[128,96,64],[0,224,64],[128,224,64],[0,96,192],[128,96,192],[0,224,192],[128,224,192],[64,96,64],[192,96,64],[64,224,64],[192,224,64],[64,96,192],[192,96,192],[64,224,192],[192,224,192],[32,32,0],[160,32,0],[32,160,0],[160,160,0],[32,32,128],[160,32,128],[32,160,128],[160,160,128],[96,32,0],[224,32,0],[96,160,0],[224,160,0],[96,32,128],[224,32,128],[96,160,128],[224,160,128],[32,96,0],[160,96,0],[32,224,0],[160,224,0],[32,96,128],[160,96,128],[32,224,128],[160,224,128],[96,96,0],[224,96,0],[96,224,0],[224,224,0],[96,96,128],[224,96,128],[96,224,128],[224,224,128],[32,32,64],[160,32,64],[32,160,64],[160,160,64],[32,32,192],[160,32,192],[32,160,192],[160,160,192],[96,32,64],[224,32,64],[96,160,64],[224,160,64],[96,32,192],[224,32,192],[96,160,192],[224,160,192],[32,96,64],[160,96,64],[32,224,64],[160,224,64],[32,96,192],[160,96,192],[32,224,192],[160,224,192],[96,96,64],[224,96,64],[96,224,64],[224,224,64],[96,96,192],[224,96,192],[96,224,192],[224,224,192]]},DATASET_MAX_ENTRIES:{PASCAL:256,CITYSCAPES:256,ADE20K:151},LABELS:{PASCAL:["background","aeroplane","bicycle","bird","boat","bottle","bus","car","cat","chair","cow","dining table","dog","horse","motorbike","person","potted plant","sheep","sofa","train","TV"],CITYSCAPES:["road","sidewalk","building","wall","fence","pole","traffic light","traffic sign","vegetation","terrain","sky","person","rider","car","truck","bus","train","motorcycle","bicycle"],ADE20K:["background","wall","building","sky","floor","tree","ceiling","road","bed","windowpane","grass","cabinet","sidewalk","person","earth","door","table","mountain","plant","curtain","chair","car","water","painting","sofa","shelf","house","sea","mirror","rug","field","armchair","seat","fence","desk","rock","wardrobe","lamp","bathtub","railing","cushion","base","box","column","signboard","chest","counter","sand","sink","skyscraper","fireplace","refrigerator","grandstand","path","stairs","runway","case","pool","pillow","screen","stairway","river","bridge","bookcase","blind","coffee","toilet","flower","book","hill","bench","countertop","stove","palm","kitchen","computer","swivel","boat","bar","arcade","hovel","bus","towel","light","truck","tower","chandelier","awning","streetlight","booth","television","airplane","dirt","apparel","pole","land","bannister","escalator","ottoman","bottle","buffet","poster","stage","van","ship","fountain","conveyer","canopy","washer","plaything","swimming","stool","barrel","basket","waterfall","tent","bag","minibike","cradle","oven","ball","food","step","tank","trade","microwave","pot","animal","bicycle","lake","dishwasher","screen","blanket","sculpture","hood","sconce","vase","traffic","tray","ashcan","fan","pier","screen","plate","monitor","bulletin","shower","radiator","glass","clock","flag"]}},p=function(){function e(e,t){this.model=e,this.base=t}return e.prototype.predict=function(e){var t=this;return(0,l.tidy)(function(){var n,r=(0,l.cast)((0,l.tidy)(function(){var t=e instanceof l.Tensor?e:l.browser.fromPixels(e),n=t.shape,r=n[0],i=n[1],o=u.CROP_SIZE/Math.max(i,r);return(0,l.expandDims)(l.image.resizeBilinear(t,[Math.round(r*o),Math.round(i*o)]))}),"int32");return(0,l.squeeze)(t.model.execute(r))})},e.prototype.segment=function(e,t){return void 0===t&&(t={}),c(this,void 0,void 0,function(){var n,r,i,o,a,s,h,p,g,w,f=this;return d(this,function(m){switch(m.label){case 0:if(!(t.colormap&&t.labels||this.base))throw Error("Calling the 'segment' method requires either the 'base' attribute to be defined (e.g. 'pascal', 'cityscapes' or'ade20k'), or 'colormap' and 'labels' options to be set. Aborting, since neither has been provided.");return t.colormap&&t.labels||(t.colormap=function(e){if("pascal"===e)return u.COLORMAPS.PASCAL;if("ade20k"===e)return u.COLORMAPS.ADE20K;if("cityscapes"===e)return u.COLORMAPS.CITYSCAPES;throw Error("SemanticSegmentation cannot be constructed with an invalid base model "+e+". Try one of 'pascal', 'cityscapes' and 'ade20k'.")}(this.base),t.labels=function(e){if("pascal"===e)return u.LABELS.PASCAL;if("ade20k"===e)return u.LABELS.ADE20K;if("cityscapes"===e)return u.LABELS.CITYSCAPES;throw Error("SemanticSegmentation cannot be constructed with an invalid base model "+e+". Try one of 'pascal', 'cityscapes' and 'ade20k'.")}(this.base)),n=t.colormap,r=t.labels,i=t.canvas,s=(a=(o=(0,l.tidy)(function(){return f.predict(e)})).shape)[0],h=a[1],[4,function(e,t,n,r){return c(this,void 0,void 0,function(){var i,o,a,s,h,c,u,p,g,w,f,m,y,b;return d(this,function(d){switch(d.label){case 0:if(e.length<t.length)throw Error("The colormap must be expansive enough to encode each label. Aborting, since the given colormap has length "+e.length+", but there are "+t.length+" labels.");return o=(i=n.shape)[0],a=i[1],s=(0,l.buffer)([o,a,3],"int32"),[4,n.array()];case 1:for(h=d.sent(),c=new Set,u=0;u<o;++u)for(p=0;p<a;++p)b=h[u][p],c.add(b),s.set(e[b][0],u,p,0),s.set(e[b][1],u,p,1),s.set(e[b][2],u,p,2);return g=s.toTensor(),[4,l.browser.toPixels(g,r)];case 2:for(w=d.sent(),(0,l.dispose)(g),f={},m=0,y=Array.from(c);m<y.length;m++)f[t[b=y[m]]]=e[b];return[2,{legend:f,segmentationMap:w}]}})})}(n,r,o,i)];case 1:return g=(p=m.sent()).legend,w=p.segmentationMap,(0,l.dispose)(o),[2,{legend:g,height:s,width:h,segmentationMap:w}]}})})},e.prototype.dispose=function(){return c(this,void 0,void 0,function(){return d(this,function(e){return this.model&&this.model.dispose(),[2]})})},e}(),g=function(){var e=function(){(0,s.p)(m.current,n,1,0).then(function(e){f(e),i(void 0)})},t=(0,a.useState)(),n=t[0],i=t[1],g=(0,a.useState)("py_image_50.png"),w=g[0],f=g[1],m=(0,a.useRef)(null);return console.log(n),(0,a.useEffect)(function(){var e=document.getElementById("img");console.log(e),/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ (function(e){return void 0===e&&(e={base:"pascal",quantizationBytes:2}),c(this,void 0,void 0,function(){var t;return d(this,function(n){switch(n.label){case 0:var r,i;if(null==l)throw Error("Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this model.");if(e.base){if(-1===["pascal","cityscapes","ade20k"].indexOf(e.base))throw Error("SemanticSegmentation cannot be constructed with an invalid base model "+e.base+". Try one of 'pascal', 'cityscapes' and 'ade20k'.");if(-1===[1,2,4].indexOf(e.quantizationBytes))throw Error("Only quantization to 1, 2 or 4 bytes is supported.")}else if(!e.modelUrl)throw Error("SemanticSegmentation can be constructed either by passing the weights URL or one of the supported base model names from 'pascal', 'cityscapes' and 'ade20k',together with the degree of quantization (either 1, 2 or 4).Aborting, since neither has been provided.");return[4,(0,h.loadGraphModel)(e.modelUrl||(r=e.base,i=e.quantizationBytes,""+u.BASE_PATH+"/"+(4===i?r+"/1/default/1/model.json":r+"/1/quantized/"+i+"/1/model.json")+"?tfjs-format=file"))];case 1:return t=n.sent(),[2,new p(t,e.base)]}})})})().then(function(t){t.segment(e).then(function(e){console.log(e)})})},[]),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{children:(0,r.jsx)("button",{onClick:function(t){return e()},children:"crop"})}),(0,r.jsx)(o(),{crop:n,onChange:function(e){return i(e)},children:(0,r.jsx)("img",{id:"img",ref:m,src:w})})]})}},1919:function(){},6120:function(e,t,n){var r;r=e=>(()=>{"use strict";var t={899(t){t.exports=e}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var o=n[e]={exports:{}};return t[e](o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{r.r(i),r.d(i,{Component:()=>w,areCropsEqual:()=>s,centerCrop:()=>l,clamp:()=>a,containCrop:()=>u,convertToPercentCrop:()=>c,convertToPixelCrop:()=>d,default:()=>w,defaultCrop:()=>o,makeAspectCrop:()=>h,nudgeCrop:()=>p});var e=r(899),t=r.n(e);function n(e){var t,r,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e){if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=n(e[t]))&&(i&&(i+=" "),i+=r);else for(t in e)e[t]&&(i&&(i+=" "),i+=t)}return i}let o={x:0,y:0,width:0,height:0,unit:"px"};function a(e,t,n){return Math.min(Math.max(e,t),n)}function s(e,t){return e.width===t.width&&e.height===t.height&&e.x===t.x&&e.y===t.y&&e.unit===t.unit}function h(e,t,n,r){let i=d(e,n,r);return e.width&&(i.height=i.width/t),e.height&&(i.width=i.height*t),i.y+i.height>r&&(i.height=r-i.y,i.width=i.height*t),i.x+i.width>n&&(i.width=n-i.x,i.height=i.width/t),"%"===e.unit?c(i,n,r):i}function l(e,t,n){let r=d(e,t,n);return r.x=(t-r.width)/2,r.y=(n-r.height)/2,"%"===e.unit?c(r,t,n):r}function c(e,t,n){return"%"===e.unit?{...o,...e,unit:"%"}:{unit:"%",x:e.x?e.x/t*100:0,y:e.y?e.y/n*100:0,width:e.width?e.width/t*100:0,height:e.height?e.height/n*100:0}}function d(e,t,n){return e.unit?"px"===e.unit?{...o,...e,unit:"px"}:{unit:"px",x:e.x?e.x*t/100:0,y:e.y?e.y*n/100:0,width:e.width?e.width*t/100:0,height:e.height?e.height*n/100:0}:{...o,...e,unit:"px"}}function u(e,t,n,r,i,o=0,a=0,s=r,h=i){let l={...e},c=Math.min(o,r),d=Math.min(a,i),u=Math.min(s,r),p=Math.min(h,i);t&&(t>1?(d=(c=a?a*t:c)/t,u=s*t):(c=(d=o?o/t:d)*t,p=h/t)),l.y<0&&(l.height=Math.max(l.height+l.y,d),l.y=0),l.x<0&&(l.width=Math.max(l.width+l.x,c),l.x=0);let g=r-(l.x+l.width);g<0&&(l.x=Math.min(l.x,r-c),l.width+=g);let w=i-(l.y+l.height);if(w<0&&(l.y=Math.min(l.y,i-d),l.height+=w),l.width<c&&("sw"!==n&&"nw"!=n||(l.x-=c-l.width),l.width=c),l.height<d&&("nw"!==n&&"ne"!=n||(l.y-=d-l.height),l.height=d),l.width>u&&("sw"!==n&&"nw"!=n||(l.x-=u-l.width),l.width=u),l.height>p&&("nw"!==n&&"ne"!=n||(l.y-=p-l.height),l.height=p),t){let f=l.width/l.height;if(f<t){let m=Math.max(l.width/t,d);"nw"!==n&&"ne"!=n||(l.y-=m-l.height),l.height=m}else if(f>t){let y=Math.max(l.height*t,c);"sw"!==n&&"nw"!=n||(l.x-=y-l.width),l.width=y}}return l}function p(e,t,n,r){let i={...e};return"ArrowLeft"===t?"nw"===r?(i.x-=n,i.y-=n,i.width+=n,i.height+=n):"w"===r?(i.x-=n,i.width+=n):"sw"===r?(i.x-=n,i.width+=n,i.height+=n):"ne"===r?(i.y+=n,i.width-=n,i.height-=n):"e"===r?i.width-=n:"se"===r&&(i.width-=n,i.height-=n):"ArrowRight"===t&&("nw"===r?(i.x+=n,i.y+=n,i.width-=n,i.height-=n):"w"===r?(i.x+=n,i.width-=n):"sw"===r?(i.x+=n,i.width-=n,i.height-=n):"ne"===r?(i.y-=n,i.width+=n,i.height+=n):"e"===r?i.width+=n:"se"===r&&(i.width+=n,i.height+=n)),"ArrowUp"===t?"nw"===r?(i.x-=n,i.y-=n,i.width+=n,i.height+=n):"n"===r?(i.y-=n,i.height+=n):"ne"===r?(i.y-=n,i.width+=n,i.height+=n):"sw"===r?(i.x+=n,i.width-=n,i.height-=n):"s"===r?i.height-=n:"se"===r&&(i.width-=n,i.height-=n):"ArrowDown"===t&&("nw"===r?(i.x+=n,i.y+=n,i.width-=n,i.height-=n):"n"===r?(i.y+=n,i.height-=n):"ne"===r?(i.y+=n,i.width-=n,i.height-=n):"sw"===r?(i.x-=n,i.width+=n,i.height+=n):"s"===r?i.height+=n:"se"===r&&(i.width+=n,i.height+=n)),i}let g={capture:!0,passive:!1};class w extends e.PureComponent{constructor(){super(...arguments),this.docMoveBound=!1,this.mouseDownOnCrop=!1,this.dragStarted=!1,this.evData={startClientX:0,startClientY:0,startCropX:0,startCropY:0,clientX:0,clientY:0,isResize:!0},this.componentRef=(0,e.createRef)(),this.mediaRef=(0,e.createRef)(),this.initChangeCalled=!1,this.state={cropIsActive:!1,newCropIsBeingDrawn:!1},this.onCropPointerDown=e=>{let{crop:t,disabled:n}=this.props,r=this.getBox();if(!t)return;let i=d(t,r.width,r.height);if(n)return;e.cancelable&&e.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});let o=e.target.dataset.ord,a=Boolean(o),s=e.clientX,h=e.clientY,l=i.x,c=i.y;if(o){let u=e.clientX-r.x,p=e.clientY-r.y,g=0,w=0;"ne"===o||"e"==o?(g=u-(i.x+i.width),w=p-i.y,l=i.x,c=i.y+i.height):"se"===o||"s"===o?(g=u-(i.x+i.width),w=p-(i.y+i.height),l=i.x,c=i.y):"sw"===o||"w"==o?(g=u-i.x,w=p-(i.y+i.height),l=i.x+i.width,c=i.y):"nw"!==o&&"n"!=o||(g=u-i.x,w=p-i.y,l=i.x+i.width,c=i.y+i.height),s=l+r.x+g,h=c+r.y+w}this.evData={startClientX:s,startClientY:h,startCropX:l,startCropY:c,clientX:e.clientX,clientY:e.clientY,isResize:a,ord:o},this.mouseDownOnCrop=!0,this.setState({cropIsActive:!0})},this.onComponentPointerDown=e=>{let{crop:t,disabled:n,locked:r,keepSelection:i,onChange:o}=this.props,a=this.getBox();if(n||r||i&&t)return;e.cancelable&&e.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});let s=e.clientX-a.x,h=e.clientY-a.y,l={unit:"px",x:s,y:h,width:0,height:0};this.evData={startClientX:e.clientX,startClientY:e.clientY,startCropX:s,startCropY:h,clientX:e.clientX,clientY:e.clientY,isResize:!0},this.mouseDownOnCrop=!0,o(d(l,a.width,a.height),c(l,a.width,a.height)),this.setState({cropIsActive:!0,newCropIsBeingDrawn:!0})},this.onDocPointerMove=e=>{let{crop:t,disabled:n,onChange:r,onDragStart:i}=this.props,o=this.getBox();if(n||!t||!this.mouseDownOnCrop)return;e.cancelable&&e.preventDefault(),this.dragStarted||(this.dragStarted=!0,i&&i(e));let{evData:a}=this,h;a.clientX=e.clientX,a.clientY=e.clientY,s(t,h=a.isResize?this.resizeCrop():this.dragCrop())||r(d(h,o.width,o.height),c(h,o.width,o.height))},this.onComponentKeyDown=e=>{let{crop:t,disabled:n,onChange:r,onComplete:i}=this.props,o=this.getBox();if(n)return;let s=e.key,h=!1;if(!t)return;let l=this.makePixelCrop(),u=(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)?w.nudgeStepLarge:e.shiftKey?w.nudgeStepMedium:w.nudgeStep;if("ArrowLeft"===s?(l.x-=u,h=!0):"ArrowRight"===s?(l.x+=u,h=!0):"ArrowUp"===s?(l.y-=u,h=!0):"ArrowDown"===s&&(l.y+=u,h=!0),h){e.cancelable&&e.preventDefault(),l.x=a(l.x,0,o.width-l.width),l.y=a(l.y,0,o.height-l.height);let p=d(l,o.width,o.height),g=c(l,o.width,o.height);r(p,g),i&&i(p,g)}},this.onHandlerKeyDown=(e,t)=>{let{aspect:n=0,crop:r,disabled:i,minWidth:o=0,minHeight:a=0,maxWidth:h,maxHeight:l,onChange:g,onComplete:f}=this.props,m=this.getBox();if(i||!r||"ArrowUp"!==e.key&&"ArrowDown"!==e.key&&"ArrowLeft"!==e.key&&"ArrowRight"!==e.key)return;e.stopPropagation(),e.preventDefault();let y=(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)?w.nudgeStepLarge:e.shiftKey?w.nudgeStepMedium:w.nudgeStep,b=u(p(d(r,m.width,m.height),e.key,y,t),n,t,m.width,m.height,o,a,h,l);if(!s(r,b)){let v=c(b,m.width,m.height);g(b,v),f&&f(b,v)}},this.onDocPointerDone=e=>{let{crop:t,disabled:n,onComplete:r,onDragEnd:i}=this.props,o=this.getBox();this.unbindDocMove(),!n&&t&&this.mouseDownOnCrop&&(this.mouseDownOnCrop=!1,this.dragStarted=!1,i&&i(e),r&&r(d(t,o.width,o.height),c(t,o.width,o.height)),this.setState({cropIsActive:!1,newCropIsBeingDrawn:!1}))},this.onDragFocus=e=>{var t;null===(t=this.componentRef.current)||void 0===t||t.scrollTo(0,0)}}get document(){return document}getBox(){let e=this.mediaRef.current;if(!e)return{x:0,y:0,width:0,height:0};let{x:t,y:n,width:r,height:i}=e.getBoundingClientRect();return{x:t,y:n,width:r,height:i}}componentDidUpdate(e){let{crop:t,onComplete:n}=this.props;if(n&&!e.crop&&t){let{width:r,height:i}=this.getBox();r&&i&&n(d(t,r,i),c(t,r,i))}}componentWillUnmount(){this.resizeObserver&&this.resizeObserver.disconnect()}bindDocMove(){this.docMoveBound||(this.document.addEventListener("pointermove",this.onDocPointerMove,g),this.document.addEventListener("pointerup",this.onDocPointerDone,g),this.document.addEventListener("pointercancel",this.onDocPointerDone,g),this.docMoveBound=!0)}unbindDocMove(){this.docMoveBound&&(this.document.removeEventListener("pointermove",this.onDocPointerMove,g),this.document.removeEventListener("pointerup",this.onDocPointerDone,g),this.document.removeEventListener("pointercancel",this.onDocPointerDone,g),this.docMoveBound=!1)}getCropStyle(){let{crop:e}=this.props;if(e)return{top:`${e.y}${e.unit}`,left:`${e.x}${e.unit}`,width:`${e.width}${e.unit}`,height:`${e.height}${e.unit}`}}dragCrop(){let{evData:e}=this,t=this.getBox(),n=this.makePixelCrop(),r=e.clientX-e.startClientX,i=e.clientY-e.startClientY;return n.x=a(e.startCropX+r,0,t.width-n.width),n.y=a(e.startCropY+i,0,t.height-n.height),n}getPointRegion(e){let{evData:t}=this,n=t.clientX-e.x,r=t.clientY-e.y<t.startCropY;return n<t.startCropX?r?"nw":"sw":r?"ne":"se"}resizeCrop(){let{evData:e}=this,t=this.getBox(),{aspect:n=0,minWidth:r=0,minHeight:i=0,maxWidth:o,maxHeight:a}=this.props,s=this.getPointRegion(t),h=this.makePixelCrop(),l=e.ord?e.ord:s,c=e.clientX-e.startClientX,d=e.clientY-e.startClientY,p={unit:"px",x:0,y:0,width:0,height:0};"ne"===s?(p.x=e.startCropX,p.width=c,n?(p.height=p.width/n,p.y=e.startCropY-p.height):(p.height=Math.abs(d),p.y=e.startCropY-p.height)):"se"===s?(p.x=e.startCropX,p.y=e.startCropY,p.width=c,p.height=n?p.width/n:d):"sw"===s?(p.x=e.startCropX+c,p.y=e.startCropY,p.width=Math.abs(c),p.height=n?p.width/n:d):"nw"===s&&(p.x=e.startCropX+c,p.width=Math.abs(c),n?(p.height=p.width/n,p.y=e.startCropY-p.height):(p.height=Math.abs(d),p.y=e.startCropY+d));let g=u(p,n,s,t.width,t.height,r,i,o,a);return n||w.xyOrds.indexOf(l)>-1?(h.x=g.x,h.y=g.y,h.width=g.width,h.height=g.height):w.xOrds.indexOf(l)>-1?(h.x=g.x,h.width=g.width):w.yOrds.indexOf(l)>-1&&(h.y=g.y,h.height=g.height),h}createCropSelection(){let{ariaLabels:e=w.defaultProps.ariaLabels,disabled:n,locked:r,renderSelectionAddon:i,ruleOfThirds:o,crop:a}=this.props,s=this.getCropStyle();if(a)return t().createElement("div",{style:s,className:"ReactCrop__crop-selection",onPointerDown:this.onCropPointerDown,"aria-label":e.cropArea,tabIndex:0,onKeyDown:this.onComponentKeyDown,role:"group"},!n&&!r&&t().createElement("div",{className:"ReactCrop__drag-elements",onFocus:this.onDragFocus},t().createElement("div",{className:"ReactCrop__drag-bar ord-n","data-ord":"n"}),t().createElement("div",{className:"ReactCrop__drag-bar ord-e","data-ord":"e"}),t().createElement("div",{className:"ReactCrop__drag-bar ord-s","data-ord":"s"}),t().createElement("div",{className:"ReactCrop__drag-bar ord-w","data-ord":"w"}),t().createElement("div",{className:"ReactCrop__drag-handle ord-nw","data-ord":"nw",tabIndex:0,"aria-label":e.nwDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"nw"),role:"button"}),t().createElement("div",{className:"ReactCrop__drag-handle ord-n","data-ord":"n",tabIndex:0,"aria-label":e.nDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"n"),role:"button"}),t().createElement("div",{className:"ReactCrop__drag-handle ord-ne","data-ord":"ne",tabIndex:0,"aria-label":e.neDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"ne"),role:"button"}),t().createElement("div",{className:"ReactCrop__drag-handle ord-e","data-ord":"e",tabIndex:0,"aria-label":e.eDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"e"),role:"button"}),t().createElement("div",{className:"ReactCrop__drag-handle ord-se","data-ord":"se",tabIndex:0,"aria-label":e.seDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"se"),role:"button"}),t().createElement("div",{className:"ReactCrop__drag-handle ord-s","data-ord":"s",tabIndex:0,"aria-label":e.sDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"s"),role:"button"}),t().createElement("div",{className:"ReactCrop__drag-handle ord-sw","data-ord":"sw",tabIndex:0,"aria-label":e.swDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"sw"),role:"button"}),t().createElement("div",{className:"ReactCrop__drag-handle ord-w","data-ord":"w",tabIndex:0,"aria-label":e.wDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"w"),role:"button"})),i&&t().createElement("div",{className:"ReactCrop__selection-addon",onMouseDown:e=>e.stopPropagation()},i(this.state)),o&&t().createElement(t().Fragment,null,t().createElement("div",{className:"ReactCrop__rule-of-thirds-hz"}),t().createElement("div",{className:"ReactCrop__rule-of-thirds-vt"})))}makePixelCrop(){let e={...o,...this.props.crop||{}},t=this.getBox();return d(e,t.width,t.height)}render(){let{aspect:e,children:r,circularCrop:i,className:o,crop:a,disabled:s,locked:h,style:l,ruleOfThirds:c}=this.props,{cropIsActive:d,newCropIsBeingDrawn:u}=this.state,p=a?this.createCropSelection():null,g=function(){for(var e,t,r=0,i="";r<arguments.length;)(e=arguments[r++])&&(t=n(e))&&(i&&(i+=" "),i+=t);return i}("ReactCrop",o,{"ReactCrop--active":d,"ReactCrop--disabled":s,"ReactCrop--locked":h,"ReactCrop--new-crop":u,"ReactCrop--fixed-aspect":a&&e,"ReactCrop--circular-crop":a&&i,"ReactCrop--rule-of-thirds":a&&c,"ReactCrop--invisible-crop":!this.dragStarted&&a&&!a.width&&!a.height});return t().createElement("div",{ref:this.componentRef,className:g,style:l},t().createElement("div",{ref:this.mediaRef,className:"ReactCrop__child-wrapper",onPointerDown:this.onComponentPointerDown},r),p)}}w.xOrds=["e","w"],w.yOrds=["n","s"],w.xyOrds=["nw","ne","se","sw"],w.nudgeStep=1,w.nudgeStepMedium=10,w.nudgeStepLarge=100,w.defaultProps={ariaLabels:{cropArea:"Use the arrow keys to move the crop selection area",nwDragHandle:"Use the arrow keys to move the north west drag handle to change the crop selection area",nDragHandle:"Use the up and down arrow keys to move the north drag handle to change the crop selection area",neDragHandle:"Use the arrow keys to move the north east drag handle to change the crop selection area",eDragHandle:"Use the up and down arrow keys to move the east drag handle to change the crop selection area",seDragHandle:"Use the arrow keys to move the south east drag handle to change the crop selection area",sDragHandle:"Use the up and down arrow keys to move the south drag handle to change the crop selection area",swDragHandle:"Use the arrow keys to move the south west drag handle to change the crop selection area",wDragHandle:"Use the up and down arrow keys to move the west drag handle to change the crop selection area"}}})(),i})(),e.exports=r(n(7294))},5410:function(){},8628:function(){},5042:function(){},7568:function(e,t,n){"use strict";function r(e,t,n,r,i,o,a){try{var s=e[o](a),h=s.value}catch(l){n(l);return}s.done?t(h):Promise.resolve(h).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(i,o){var a=e.apply(t,n);function s(e){r(a,i,o,s,h,"next",e)}function h(e){r(a,i,o,s,h,"throw",e)}s(void 0)})}}n.d(t,{Z:function(){return i}})}},function(e){e.O(0,[56,774,888,179],function(){return e(e.s=3094)}),_N_E=e.O()}]);